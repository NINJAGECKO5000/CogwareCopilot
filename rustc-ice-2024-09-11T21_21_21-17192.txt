thread 'rustc' panicked at /rustc/0d634185dfddefe09047881175f35c65d68dcff1/compiler/rustc_query_system/src/dep_graph/graph.rs:353:9:
forcing query with already existing `DepNode`
- query-key: DefId(0:97 ~ kernel[80c8]::bsp::device_driver::bcm::bcm2xxx_pl011_uart::{impl#6}::chars_written::{closure#0})
- dep-node: mir_built(kernel[80c8]::bsp::device_driver::bcm::bcm2xxx_pl011_uart::{impl#6}::chars_written::{closure#0})
stack backtrace:
   0:     0x7f81b4a89c25 - std::backtrace::Backtrace::create::hbd8c48f0481c5932
   1:     0x7f81b31ee445 - std::backtrace::Backtrace::force_capture::h36ea2ca514f07803
   2:     0x7f81b236644e - std[33c47a099faaff4b]::panicking::update_hook::<alloc[ce9af1c38ecc3161]::boxed::Box<rustc_driver_impl[1e463bfbdf24f5b0]::install_ice_hook::{closure#0}>>::{closure#0}
   3:     0x7f81b32062b7 - std::panicking::rust_panic_with_hook::h02bc26f77fbde5a8
   4:     0x7f81b3205f77 - std::panicking::begin_panic_handler::{{closure}}::hbc35c0be988811b2
   5:     0x7f81b3203779 - std::sys::backtrace::__rust_end_short_backtrace::hbbce6d641c809190
   6:     0x7f81b3205c44 - rust_begin_unwind
   7:     0x7f81b043b1b3 - core::panicking::panic_fmt::h758c770d3046d35a
   8:     0x7f81b3caac54 - rustc_query_system[8921a4fd493c9e59]::query::plumbing::try_execute_query::<rustc_query_impl[4eb056375637fe35]::DynamicConfig<rustc_query_system[8921a4fd493c9e59]::query::caches::VecCache<rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId, rustc_middle[6b220646ab713a92]::query::erase::Erased<[u8; 8usize]>>, false, false, false>, rustc_query_impl[4eb056375637fe35]::plumbing::QueryCtxt, true>
   9:     0x7f81b3cb384a - rustc_query_impl[4eb056375637fe35]::plumbing::force_from_dep_node::<rustc_query_impl[4eb056375637fe35]::DynamicConfig<rustc_query_system[8921a4fd493c9e59]::query::caches::VecCache<rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId, rustc_middle[6b220646ab713a92]::query::erase::Erased<[u8; 8usize]>>, false, false, false>>
  10:     0x7f81b4cc5087 - <rustc_query_impl[4eb056375637fe35]::plumbing::query_callback<rustc_query_impl[4eb056375637fe35]::query_impl::mir_built::QueryType>::{closure#0} as core[30ce085b1e8bd653]::ops::function::FnOnce<(rustc_middle[6b220646ab713a92]::ty::context::TyCtxt, rustc_query_system[8921a4fd493c9e59]::dep_graph::dep_node::DepNode)>>::call_once
  11:     0x7f81b3a264a8 - <rustc_query_system[8921a4fd493c9e59]::dep_graph::graph::DepGraphData<rustc_middle[6b220646ab713a92]::dep_graph::DepsType>>::try_mark_previous_green::<rustc_query_impl[4eb056375637fe35]::plumbing::QueryCtxt>
  12:     0x7f81b3a2641e - <rustc_query_system[8921a4fd493c9e59]::dep_graph::graph::DepGraphData<rustc_middle[6b220646ab713a92]::dep_graph::DepsType>>::try_mark_previous_green::<rustc_query_impl[4eb056375637fe35]::plumbing::QueryCtxt>
  13:     0x7f81b3a2641e - <rustc_query_system[8921a4fd493c9e59]::dep_graph::graph::DepGraphData<rustc_middle[6b220646ab713a92]::dep_graph::DepsType>>::try_mark_previous_green::<rustc_query_impl[4eb056375637fe35]::plumbing::QueryCtxt>
  14:     0x7f81b3a25b14 - rustc_query_system[8921a4fd493c9e59]::query::plumbing::ensure_must_run::<rustc_query_impl[4eb056375637fe35]::DynamicConfig<rustc_query_system[8921a4fd493c9e59]::query::caches::VecCache<rustc_hir[7c20e614bf5b7885]::hir_id::OwnerId, rustc_middle[6b220646ab713a92]::query::erase::Erased<[u8; 1usize]>>, false, false, false>, rustc_query_impl[4eb056375637fe35]::plumbing::QueryCtxt>
  15:     0x7f81b3a25819 - rustc_query_impl[4eb056375637fe35]::query_impl::mir_borrowck::get_query_incr::__rust_end_short_backtrace
  16:     0x7f81b27a2b03 - <rustc_middle[6b220646ab713a92]::hir::map::Map>::par_body_owners::<rustc_interface[ed7171d439e0c406]::passes::run_required_analyses::{closure#2}::{closure#0}>::{closure#0}
  17:     0x7f81b2785d9a - rayon[20a9d60e00c04e73]::iter::plumbing::bridge_producer_consumer::helper::<rayon[20a9d60e00c04e73]::slice::IterProducer<rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId>, rayon[20a9d60e00c04e73]::iter::for_each::ForEachConsumer<rustc_data_structures[d7a590cdbf52bba5]::sync::parallel::enabled::par_for_each_in<&rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId, &[rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId], <rustc_middle[6b220646ab713a92]::hir::map::Map>::par_body_owners<rustc_interface[ed7171d439e0c406]::passes::run_required_analyses::{closure#2}::{closure#0}>::{closure#0}>::{closure#0}::{closure#0}>>
  18:     0x7f81b27a569c - rayon_core[30f50b834dc4591f]::join::join_context::<rayon[20a9d60e00c04e73]::iter::plumbing::bridge_producer_consumer::helper<rayon[20a9d60e00c04e73]::slice::IterProducer<rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId>, rayon[20a9d60e00c04e73]::iter::for_each::ForEachConsumer<rustc_data_structures[d7a590cdbf52bba5]::sync::parallel::enabled::par_for_each_in<&rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId, &[rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId], <rustc_middle[6b220646ab713a92]::hir::map::Map>::par_body_owners<rustc_interface[ed7171d439e0c406]::passes::run_required_analyses::{closure#2}::{closure#0}>::{closure#0}>::{closure#0}::{closure#0}>>::{closure#0}, rayon[20a9d60e00c04e73]::iter::plumbing::bridge_producer_consumer::helper<rayon[20a9d60e00c04e73]::slice::IterProducer<rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId>, rayon[20a9d60e00c04e73]::iter::for_each::ForEachConsumer<rustc_data_structures[d7a590cdbf52bba5]::sync::parallel::enabled::par_for_each_in<&rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId, &[rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId], <rustc_middle[6b220646ab713a92]::hir::map::Map>::par_body_owners<rustc_interface[ed7171d439e0c406]::passes::run_required_analyses::{closure#2}::{closure#0}>::{closure#0}>::{closure#0}::{closure#0}>>::{closure#1}, (), ()>::{closure#0}
  19:     0x7f81b2785f4c - rayon[20a9d60e00c04e73]::iter::plumbing::bridge_producer_consumer::helper::<rayon[20a9d60e00c04e73]::slice::IterProducer<rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId>, rayon[20a9d60e00c04e73]::iter::for_each::ForEachConsumer<rustc_data_structures[d7a590cdbf52bba5]::sync::parallel::enabled::par_for_each_in<&rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId, &[rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId], <rustc_middle[6b220646ab713a92]::hir::map::Map>::par_body_owners<rustc_interface[ed7171d439e0c406]::passes::run_required_analyses::{closure#2}::{closure#0}>::{closure#0}>::{closure#0}::{closure#0}>>
  20:     0x7f81b27d1038 - <rayon_core[30f50b834dc4591f]::job::StackJob<rayon_core[30f50b834dc4591f]::latch::SpinLatch, rayon_core[30f50b834dc4591f]::join::join_context::call_b<(), rayon[20a9d60e00c04e73]::iter::plumbing::bridge_producer_consumer::helper<rayon[20a9d60e00c04e73]::slice::IterProducer<rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId>, rayon[20a9d60e00c04e73]::iter::for_each::ForEachConsumer<rustc_data_structures[d7a590cdbf52bba5]::sync::parallel::enabled::par_for_each_in<&rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId, &[rustc_span[9f5f1f8bc531a631]::def_id::LocalDefId], <rustc_middle[6b220646ab713a92]::hir::map::Map>::par_body_owners<rustc_interface[ed7171d439e0c406]::passes::run_required_analyses::{closure#2}::{closure#0}>::{closure#0}>::{closure#0}::{closure#0}>>::{closure#1}>::{closure#0}, ()> as rayon_core[30f50b834dc4591f]::job::Job>::execute
  21:     0x7f81b1e85bbe - <rayon_core[30f50b834dc4591f]::registry::WorkerThread>::wait_until_cold
  22:     0x7f81b1e83749 - <rayon_core[30f50b834dc4591f]::registry::ThreadBuilder>::run
  23:     0x7f81b2368a97 - <<crossbeam_utils[7038fff71d844713]::thread::ScopedThreadBuilder>::spawn<<rayon_core[30f50b834dc4591f]::ThreadPoolBuilder>::build_scoped<rustc_interface[ed7171d439e0c406]::util::run_in_thread_pool_with_globals<rustc_interface[ed7171d439e0c406]::interface::run_compiler<core[30ce085b1e8bd653]::result::Result<(), rustc_span[9f5f1f8bc531a631]::ErrorGuaranteed>, rustc_driver_impl[1e463bfbdf24f5b0]::run_compiler::{closure#0}>::{closure#1}, core[30ce085b1e8bd653]::result::Result<(), rustc_span[9f5f1f8bc531a631]::ErrorGuaranteed>>::{closure#3}::{closure#0}::{closure#0}, rustc_interface[ed7171d439e0c406]::util::run_in_thread_pool_with_globals<rustc_interface[ed7171d439e0c406]::interface::run_compiler<core[30ce085b1e8bd653]::result::Result<(), rustc_span[9f5f1f8bc531a631]::ErrorGuaranteed>, rustc_driver_impl[1e463bfbdf24f5b0]::run_compiler::{closure#0}>::{closure#1}, core[30ce085b1e8bd653]::result::Result<(), rustc_span[9f5f1f8bc531a631]::ErrorGuaranteed>>::{closure#3}::{closure#0}::{closure#1}, core[30ce085b1e8bd653]::result::Result<(), rustc_span[9f5f1f8bc531a631]::ErrorGuaranteed>>::{closure#0}::{closure#0}::{closure#0}, ()>::{closure#0} as core[30ce085b1e8bd653]::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}
  24:     0x7f81b235b2ce - std[33c47a099faaff4b]::sys::backtrace::__rust_begin_short_backtrace::<alloc[ce9af1c38ecc3161]::boxed::Box<dyn core[30ce085b1e8bd653]::ops::function::FnOnce<(), Output = ()> + core[30ce085b1e8bd653]::marker::Send>, ()>
  25:     0x7f81b236878a - <<std[33c47a099faaff4b]::thread::Builder>::spawn_unchecked_<alloc[ce9af1c38ecc3161]::boxed::Box<dyn core[30ce085b1e8bd653]::ops::function::FnOnce<(), Output = ()> + core[30ce085b1e8bd653]::marker::Send>, ()>::{closure#1} as core[30ce085b1e8bd653]::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}
  26:     0x7f81b486fbeb - std::sys::pal::unix::thread::Thread::new::thread_start::hdfe83d95433cb6b3
  27:     0x7f81aecab652 - <unknown>
  28:     0x7f81aed278ac - <unknown>
  29:                0x0 - <unknown>


rustc version: 1.82.0-nightly (0d634185d 2024-08-29)
platform: x86_64-unknown-linux-gnu

query stack during panic:
#0 [mir_built] building MIR for `bsp::device_driver::bcm::bcm2xxx_pl011_uart::<impl at src/bsp/device_driver/bcm/bcm2xxx_pl011_uart.rs:397:1: 397:50>::chars_written::{closure#0}`
#1 [analysis] running analysis passes on this crate
end of query stack
